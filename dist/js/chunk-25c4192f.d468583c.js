(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-25c4192f"],{"0a4a":function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"container-fluid container-lg grid-setting"},[s("div",{staticClass:"vld-parent"},[s("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}})],1),t._m(0),s("ValidationObserver",{ref:"form"},[s("form",{staticClass:"row justify-content-center",on:{submit:function(a){return a.preventDefault(),t.createdOrder(a)}}},[s("div",{staticClass:"col d-md-none mb-6 mx-2",attrs:{"data-aos":"fade-up","data-aos-delay":"150"}},[s("div",{staticClass:"border border-light shadow rounded position-relative px-4 py-4"},[s("a",{staticClass:"h6 font-h5-sm text-dark font-weight-normal d-flex justify-content-center\n            text-decoration-none py-1",attrs:{"data-toggle":"collapse",href:"#collapseExample",role:"button","aria-expanded":"false","aria-controls":"collapseExample"}},[t._v("訂 單 內 容 "),s("span",{staticClass:"badge badge-pill badge-warning text-white ml-2"},[t._v(t._s(t.cartLength))]),s("i",{staticClass:"fas fa-chevron-down position-absolute"})]),s("div",{staticClass:"collapse mt-4",attrs:{id:"collapseExample"}},[s("table",{staticClass:"table mb-0"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("商品")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("金額")])])]),s("tbody",[t._l(t.carts.carts,(function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.product.title)+" x "+t._s(a.qty))]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.product.price)))])])})),s("tr",[s("td",{staticClass:"font-weight-bold"},[t._v("總計")]),s("td",{staticClass:"h5 text-dark text-right font-family-roboto"},[t._v(" "+t._s(t._f("currency")(t.carts.total)))])]),t.carts.total!==t.carts.final_total?s("tr",[s("td",{staticClass:"font-weight-bold"},[t._v("折扣價 "),s("p",{staticClass:"text-success font-xs font-weight-normal line-height-1"},[t._v(" (已套用優惠券)")])]),s("td",{staticClass:"h3 text-right text-success font-family-roboto"},[t._v(" "+t._s(t._f("currency")(t.carts.final_total)))])]):t._e()],2)])])])]),s("div",{staticClass:"col-md-7",attrs:{"data-aos":"fade-up","data-aos-delay":"150"}},[0===t.cartLength?s("div",{staticClass:"jumbotron text-center rounded-0 mb-4"},[s("div",{staticClass:"h4 text-base mb-5"},[t._v("購物清單內無商品")]),s("router-link",{staticClass:"btn btn-lg btn-primary py-1 mt-4 rounded-0",attrs:{to:{name:"Products"}}},[t._v(" 前往購物")])],1):t._e(),0!==t.cartLength?s("h2",{staticClass:"h4 text-base text-center bg-light rounded-top d-none d-md-block mb-md-3 py-4"},[t._v(" 訂單資料")]):t._e(),0!==t.cartLength?s("div",{staticClass:"px-2"},[s("div",{staticClass:"row"},[s("div",{staticClass:"form-group col-sm-6"},[s("label",{attrs:{for:"username"}},[t._v("姓名")]),s("ValidationProvider",{attrs:{name:"姓名",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"}],staticClass:"form-control",attrs:{type:"text",name:"name",id:"username",placeholder:"輸入姓名"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),s("span",{staticClass:"text-danger font-sm"},[t._v(t._s(e[0]))])]}}],null,!1,3298644543)})],1),s("div",{staticClass:"form-group col-sm-6"},[s("label",{attrs:{for:"usertel"}},[t._v("電話")]),s("ValidationProvider",{attrs:{name:"電話",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"}],staticClass:"form-control",attrs:{type:"tel",id:"usertel",placeholder:"請輸入電話"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),s("span",{staticClass:"text-danger font-sm"},[t._v(t._s(e[0]))])]}}],null,!1,359006188)})],1)]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useremail"}},[t._v("信箱")]),s("ValidationProvider",{attrs:{name:"信箱",rules:"required|email"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"}],staticClass:"form-control",attrs:{type:"email",name:"email",id:"useremail",placeholder:"請輸入信箱"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),s("span",{staticClass:"text-danger font-sm"},[t._v(t._s(e[0]))])]}}],null,!1,3877117835)})],1),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"useraddress"}},[t._v("收件地址")]),s("ValidationProvider",{attrs:{name:"地址",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.errors;return[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"}],staticClass:"form-control",attrs:{type:"text",name:"address",id:"useraddress",placeholder:"請輸入地址"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),s("span",{staticClass:"text-danger font-sm"},[t._v(t._s(e[0]))])]}}],null,!1,1524029946)})],1),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"comment"}},[t._v("留言 "),s("small",{staticClass:"text-warning"},[t._v("(選填)")])]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.message,expression:"form.message"}],staticClass:"form-control",attrs:{name:"",id:"comment",cols:"30",rows:"4"},domProps:{value:t.form.message},on:{input:function(a){a.target.composing||t.$set(t.form,"message",a.target.value)}}})])]):t._e(),s("div",{staticClass:"m-5 d-md-none"},[s("button",{staticClass:"btn btn-block btn-warning btn-submit btn-lg text-white py-3 rounded-0",class:{"d-none":0===t.cartLength},attrs:{type:"button"}},[t._v(" 送出訂單 "),s("i",{staticClass:"fas fa-arrow-right"})])]),s("div",{staticClass:"m-5 mx-md-0 text-center"},[0!==t.cartLength?s("router-link",{staticClass:"d-block btn-light text-center text-decoration-none py-1 py-md-2",attrs:{to:{name:"Cart"}}},[s("i",{staticClass:"fas fa-arrow-left"}),t._v(" 上一步，編輯購物清單")]):t._e()],1),0===t.cartLength?s("div",{staticClass:"text-center my-2 d-md-none"},[s("router-link",{staticClass:"text-brown font-weight-bold hover--shadowLine",attrs:{to:{name:"Home"}}},[s("i",{staticClass:"fas fa-arrow-left"}),t._v(" 回到 Home 首頁")])],1):t._e()]),s("div",{staticClass:"col-md-5 d-none d-md-block",attrs:{"data-aos":"fade-down","data-aos-delay":"150"}},[s("div",{staticClass:"card p-4 shadow mb-6"},[s("h4",{staticClass:"h5 text-base text-center pb-4 border-bottom border-light d-flex\n            justify-content-center"},[t._v("訂 單 內 容 "),s("span",{staticClass:"badge badge-pill badge-warning text-white ml-2"},[t._v(t._s(t.cartLength))])]),s("table",{staticClass:"table"},[s("thead",[s("tr",[s("th",{attrs:{scope:"col"}},[t._v("商品")]),s("th",{staticClass:"text-right",attrs:{scope:"col"}},[t._v("金額")])])]),s("tbody",[t._l(t.carts.carts,(function(a){return s("tr",{key:a.id},[s("td",[t._v(t._s(a.product.title)+" x "+t._s(a.qty))]),s("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.product.price)))])])})),s("tr",[s("td",{staticClass:"font-weight-bold"},[t._v("總計")]),s("td",{staticClass:"h5 text-right text-dark font-family-roboto"},[t._v(" "+t._s(t._f("currency")(t.carts.total)))])]),t.carts.total!==t.carts.final_total?s("tr",[s("td",{staticClass:"font-weight-bold align-middle"},[t._v("折扣價 "),s("span",{staticClass:"text-success font-sm font-weight-normal"},[t._v("(已套用優惠券)")])]),s("td",{staticClass:"h3 text-right text-success font-family-roboto"},[t._v(" "+t._s(t._f("currency")(t.carts.final_total)))])]):t._e()],2)]),s("div",{staticClass:"m-4"},[s("button",{staticClass:"btn btn-block btn-warning btn-submit btn-lg rounded-0 text-white",class:{disabled:0===t.cartLength},attrs:{type:"button"}},[t._v(" 送出訂單 "),s("i",{staticClass:"fas fa-arrow-right"})])])])])])])],1)},r=[function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ol",{staticClass:"row justify-content-center list-unstyled mb-4 mb-md-6"},[s("li",{staticClass:"col-3 col-lg-2 text-center d-none d-md-block py-3 mx-2 bg-gray-100",attrs:{"data-aos":"zoom-in"}},[s("span",{staticClass:"h6 text-secondary d-block"},[t._v("STEP")]),s("span",{staticClass:"h5 font-h4-md text-secondary d-block py-md-1 font-family-roboto"},[s("i",{staticClass:"fa fa-check"})]),s("p",{staticClass:"text-secondary"},[t._v("確認清單內容")])]),s("li",{staticClass:"col-md-3 col-lg-2 text-center bg-primary-300 py-1 py-md-3 mx-4 mx-md-2",attrs:{"data-aos":"zoom-in","data-aos-delay":"150"}},[s("span",{staticClass:"font-sm font-h6-md text-brown font-weight-bold d-block"},[t._v("STEP")]),s("span",{staticClass:"h5 font-h4-md text-brown font-family-roboto d-block py-md-1"},[t._v("02")]),s("p",{staticClass:"font-sm font-h6-md text-brown"},[t._v("填寫訂購資料")])]),s("li",{staticClass:"col-3 col-lg-2 text-center d-none d-md-block py-3 mx-2 bg-gray-100",attrs:{"data-aos":"zoom-in","data-aos-delay":"300"}},[s("span",{staticClass:"h6 text-secondary d-block"},[t._v("STEP")]),s("span",{staticClass:"h4 text-secondary d-block py-md-1 font-family-roboto"},[t._v("03")]),s("p",{staticClass:"text-secondary"},[t._v("付款/完成訂單")])])])}],o=(s("99af"),s("5530")),n=s("7bb1"),l=s("4c93"),i=s("2f62");Object(n["c"])("required",Object(o["a"])(Object(o["a"])({},l["b"]),{},{message:"{_field_} 欄位不得留空"})),Object(n["c"])("email",Object(o["a"])(Object(o["a"])({},l["a"]),{},{message:"{_field_} 必須是有效的電子郵件地址"}));var c={components:{ValidationProvider:n["b"],ValidationObserver:n["a"]},data:function(){return{form:{user:{}},isLoading:!1}},computed:Object(o["a"])({},Object(i["c"])("cartModules",["carts","cartLength"])),methods:{createdOrder:function(){var t=this,a="".concat("https://vue-course-api.hexschool.io","/api/").concat("aimer","/order");this.$refs.form.validate().then((function(s){s?t.$http.post(a,{data:t.form}).then((function(a){a.data.success?(t.$store.dispatch("alertMessageModules/updateMessage",{message:a.data.message,status:"success"}),t.$router.push({name:"ConsumerOrder",params:{orderId:a.data.orderId}})):t.$store.dispatch("alertMessageModules/updateMessage",{message:a.data.message,status:"danger"})})):t.$store.dispatch("alertMessageModules/updateMessage",{message:"欄位填寫不完整",status:"danger"})}))}},created:function(){this.$store.dispatch("cartModules/getCart")}},d=c,m=(s("743d"),s("2877")),u=Object(m["a"])(d,e,r,!1,null,"1be9cbbc",null);a["default"]=u.exports},"1b12":function(t,a,s){},"743d":function(t,a,s){"use strict";var e=s("1b12"),r=s.n(e);r.a}}]);
//# sourceMappingURL=chunk-25c4192f.d468583c.js.map