(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e6ed214"],{1799:function(t,a,e){"use strict";var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("nav",{staticClass:"page border-top",attrs:{"aria-label":"page"}},[e("ul",{staticClass:"pagination justify-content-center"},[e("li",{staticClass:"page-item",class:{disabled:!t.page.has_pre}},[e("a",{staticClass:"page-link page-previous",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.ChanePage(t.page.current_page-1)}}},[e("span",{staticClass:"d-none d-sm-block"},[t._v("PREVIOUS")]),t._m(0)])]),t._l(t.page.total_pages,(function(a){return e("li",{key:a,staticClass:"page-item",class:{active:a==t.page.current_page}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.ChanePage(a)}}},[t._v(t._s(a))])])})),e("li",{staticClass:"page-item",class:{disabled:!t.page.has_next}},[e("a",{staticClass:"page-link page-next",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.ChanePage(t.page.current_page+1)}}},[e("span",{staticClass:"d-none d-sm-block"},[t._v("NEXT")]),t._m(1)])])],2)])},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"d-sm-none"},[e("i",{staticClass:"fas fa-arrow-left"})])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("span",{staticClass:"d-sm-none"},[e("i",{staticClass:"fas  fa-arrow-right"})])}],n=(e("a9e3"),{props:["page"],data:function(){return{}},methods:{ChanePage:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.$emit("ChanePageKey",Number(t))}}}),l=n,i=e("2877"),r=Object(i["a"])(l,s,o,!1,null,null,null);a["a"]=r.exports},"83c9":function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"back-grid-setting d-flex flex-column justify-content-between"},[e("main",[e("div",{staticClass:"d-flex align-items-center justify-content-between mt-4 mb-6 mx-md-4"},[e("h2",{staticClass:"h4 text-dark"},[t._v("Coupon List")]),e("button",{staticClass:"btn ml-8 font-weight-bold hover--colorPrimary",attrs:{type:"button"},on:{click:function(a){return t.openModal(!0)}}},[e("span",{staticClass:"fas fa-plus mr-1 text-primary"}),t._v(" Add "),e("span",{staticClass:"d-none d-md-inline hover--colorPrimary"},[t._v("New Coupon")])])]),e("table",{staticClass:"table text-center"},[t._m(0),e("tbody",t._l(t.coupons,(function(a){return e("tr",{key:a.id,staticClass:"cursor-pointer hover--shadow",on:{click:function(e){return t.detailModal(a)}}},[e("td",{staticClass:"d-sm-table-cell d-none align-middle"},[a.is_enabled?e("span",{staticClass:"text-success"},[t._v("啟動")]):e("span",{staticClass:"text-danger"},[t._v("未啟動")])]),e("td",{staticClass:"align-middle text-left",attrs:{scope:"row"}},[t._v(" "+t._s(a.title))]),e("td",{staticClass:"d-lg-table-cell d-none align-middle text-left"},[t._v(" "+t._s(a.code))]),e("td",{staticClass:"align-middle"},[t._v(" "+t._s(t._f("percentage")(a.percent)))]),e("td",{staticClass:"d-md-table-cell d-none align-middle"},[t._v(" "+t._s(t._f("date")(a.due_date)))]),e("th",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-sm hover--colorPrimary",attrs:{type:"button"},on:{click:function(e){return e.stopPropagation(),t.openModal(!1,a)}}},[e("span",{staticClass:"fas fa-pen fa-lg"})])])])})),0)])]),e("Pagination",{attrs:{page:t.page},on:{ChanePageKey:t.getCoupons}}),e("div",{staticClass:"modal fade",attrs:{id:"updataModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("ValidationObserver",{ref:"form"},[e("form",{staticClass:"modal-dialog modal-dialog-scrollable",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[e("div",{staticClass:"modal-header bg-dark"},[e("h5",{staticClass:"modal-title font-weight-normal",attrs:{id:"exampleModalLabel"}},[t.isCreate?e("span",{staticClass:"font-weight-bold"},[t._v("New")]):e("span",{staticClass:"font-weight-bold"},[t._v("Edit")]),t._v(" Coupon ")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("i",{staticClass:"fas fa-times"})])]),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm text-left"},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"title"}},[t._v("名稱")]),e("ValidationProvider",{attrs:{name:"名稱",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入名稱"},domProps:{value:t.tempCoupon.title},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"title",a.target.value)}}}),e("span",{staticClass:"font-sm text-danger-500"},[t._v(t._s(s[0]))])]}}])})],1),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"code"}},[t._v("優惠碼")]),e("ValidationProvider",{attrs:{name:"優惠碼",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入優惠卷的代碼"},domProps:{value:t.tempCoupon.code},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"code",a.target.value)}}}),e("span",{staticClass:"font-sm text-danger-500"},[t._v(t._s(s[0]))])]}}])})],1)]),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"percent"}},[t._v("折扣百分比")]),e("ValidationProvider",{attrs:{name:"折扣",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"text",id:"percent",placeholder:"請輸入折扣百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"percent",a.target.value)}}}),e("span",{staticClass:"font-sm text-danger-500"},[t._v(t._s(s[0]))])]}}])})],1),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"due_date"}},[t._v("到期日期")]),e("ValidationProvider",{attrs:{name:"日期",rules:"required"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.errors;return[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.due_date,expression:"tempCoupon.due_date"}],staticClass:"form-control",attrs:{type:"date",id:"due_date",placeholder:"請輸入到期日"},domProps:{value:t.tempCoupon.due_date},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"due_date",a.target.value)}}}),e("span",{staticClass:"font-sm text-danger-500"},[t._v(t._s(s[0]))])]}}])})],1)]),e("hr",{staticClass:"d-none d-sm-block"}),e("div",{staticClass:"form-group mb-0 mb-sm-4"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"fasle-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(a){var e=t.tempCoupon.is_enabled,s=a.target,o=!!s.checked&&1;if(Array.isArray(e)){var n=null,l=t._i(e,n);s.checked?l<0&&t.$set(t.tempCoupon,"is_enabled",e.concat([n])):l>-1&&t.$set(t.tempCoupon,"is_enabled",e.slice(0,l).concat(e.slice(l+1)))}else t.$set(t.tempCoupon,"is_enabled",o)}}}),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v(" 是否啟用 ")])])])]),t.isCreate?t._e():e("div",{staticClass:"col d-sm-none mb-3"},[e("hr"),e("p",{staticClass:"text-danger mb-1"},[e("span",{staticClass:"fas fa-exclamation-triangle mr-1"}),t._v(" 刪除優惠")]),e("a",{staticClass:"btn btn-outline-danger btn-block font-weight-bold font-family-raleway",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.openModal(!1,t.tempCoupon,!0)}}},[t._v(" Delete This Coupon !")])])])]),e("div",{staticClass:"modal-footer d-flex justify-content-between"},[t.isCreate?t._e():e("a",{staticClass:"btn text-danger font-weight-bold d-none d-sm-block",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.openModal(!1,t.tempCoupon,!0)}}},[e("span",{staticClass:"fas fa-exclamation-triangle"}),t._v(" Delete This Coupon !")]),e("div",{staticClass:"ml-auto"},[e("button",{staticClass:"btn btn btn-outline-gray m-1",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancle")]),t.isCreate?e("button",{staticClass:"btn modal-btn m-1",attrs:{type:"submit"},on:{click:t.updataCoupon}},[!0===t.status.itemLodingId?e("i",{staticClass:"fas fa-spinner fa-spin mx-1"}):t._e(),t._v(" Add")]):e("button",{staticClass:"btn modal-btn m-1",attrs:{type:"submit"},on:{click:t.updataCoupon}},[!0===t.status.itemLodingId?e("i",{staticClass:"fas fa-spinner fa-spin mx-1"}):t._e(),t._v(" Update")])])])])])])],1),e("div",{staticClass:"modal fade",attrs:{id:"delModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),e("div",{staticClass:"modal-body"},[t._m(2),e("p",[t._v("是否刪除"),e("strong",{staticClass:"text-black"},[t._v("【 "+t._s(t.tempCoupon.title)+" 】")]),t._v("這項優惠。 ")])]),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-gray",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Cancel")]),e("button",{staticClass:"btn btn-danger font-weight-bold",attrs:{type:"button"},on:{click:function(a){return t.delCoupon(t.tempCoupon.id)}}},[!0===t.status.itemLodingId?e("i",{staticClass:"fas fa-spinner fa-spin mx-1"}):t._e(),t._v(" Delete")])])])])]),e("div",{staticClass:"modal fade",attrs:{id:"detailModal",tabindex:"-1","aria-labelledby":"detailModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-dialog-centered modal-sm"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-body pt-6"},[t._m(3),e("div",{staticClass:"d-flex align-items-center mb-3"},[e("h3",{staticClass:"font-h5 text-black mr-2"},[t._v(t._s(t.tempCoupon.title))]),e("h4",{staticClass:"font-h6 text-dark"},[t.tempCoupon.is_enabled?e("span",{staticClass:"badge badge-pill badge-primary h5 py-1 d-flex align-items-center"},[e("i",{staticClass:"fas fa-check mr-1"}),t._v(" Public")]):e("span",{staticClass:"badge badge-pill badge-primary h5 py-1 d-flex align-items-center"},[e("i",{staticClass:"fas fa-lock mr-1"}),t._v(" Private")])])]),e("div",{staticClass:"px-2"},[e("table",{staticClass:"table table-sm mb-1"},[e("tbody",[e("tr",[e("th",{staticClass:"text-center border-primary"},[t._v("折扣")]),e("td",{staticClass:"border-primary"},[t._v(t._s(t._f("percentage")(t.tempCoupon.percent)))])]),e("tr",[e("th",{staticClass:"text-center"},[t._v("序號")]),e("td",[t._v(t._s(t.tempCoupon.code))])]),e("tr",[e("th",{staticClass:"text-center"},[t._v("期限")]),e("td",[t._v(t._s(t._f("date")(t.tempCoupon.due_date)))])])])])])]),e("div",{staticClass:"modal-footer d-flex justify-content-between py-1"},[e("a",{staticClass:"font-xs text-danger font-weight-bold text-decoration-none",attrs:{href:"#","data-dismiss":"modal"},on:{click:function(a){return a.preventDefault(),t.openModal(!1,t.tempCoupon,!0)}}},[e("span",{staticClass:"fas fa-exclamation-triangle"}),t._v(" Delete This Coupon")]),e("button",{staticClass:"font-sm font-h6-xs btn btn-dark font-weight-bold m-1 px-2 px-xs-3 ml-auto",attrs:{type:"button","data-dismiss":"modal"},on:{click:function(a){return t.openModal(!1,t.tempCoupon)}}},[t._v(" Edit "),e("span",{staticClass:"font-weight-normal"},[t._v("coupon")])])])])])])],1)},o=[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{staticClass:"d-sm-table-cell d-none",attrs:{scope:"col"}},[t._v("是否啟用")]),e("th",{staticClass:"text-left",attrs:{scope:"col"}},[t._v("名稱")]),e("th",{staticClass:"d-lg-table-cell d-none text-left",attrs:{scope:"col"}},[t._v("優惠碼")]),e("th",{attrs:{scope:"col"}},[t._v("折扣 %")]),e("th",{staticClass:"d-md-table-cell d-none",attrs:{scope:"col"}},[t._v("到期日期")]),e("th",{attrs:{scope:"col"}},[t._v("編輯")])])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"modal-header bg-danger"},[e("h5",{staticClass:"modal-title font-weight-normal text-white",attrs:{id:"exampleModalLabel"}},[e("span",{staticClass:"font-weight-bold"},[t._v("Del")]),t._v(" Coupon ")]),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("i",{staticClass:"fas fa-times"})])])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("p",{staticClass:"text-danger mb-2"},[e("span",{staticClass:"fas fa-exclamation-triangle mr-1"}),t._v(" 刪除後將無法恢復 !")])},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("button",{staticClass:"close position-absolute text-secondary focus--outline-none",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("i",{staticClass:"fas fa-times"})])}],n=e("5530"),l=e("7bb1"),i=e("4c93"),r=e("1157"),d=e.n(r),c=e("1799"),p=(e("a9e3"),e("b680"),function(t){var a=Number(t);return"".concat(parseFloat(a).toFixed(0)," %")}),u=e("2f62");Object(l["c"])("required",Object(n["a"])(Object(n["a"])({},i["b"]),{},{message:"{_field_} 欄位不得留空"}));var m={components:{Pagination:c["a"],ValidationProvider:l["b"],ValidationObserver:l["a"]},filters:{percentage:p},data:function(){return{isCreate:!0}},computed:Object(n["a"])(Object(n["a"])({},Object(u["c"])(["page","status"])),Object(u["c"])("couponModules",["coupons","tempCoupon"])),methods:Object(n["a"])(Object(n["a"])({},Object(u["b"])("couponModules",["delCoupon"])),{},{getCoupons:function(t){this.$store.dispatch("couponModules/getCoupons",t)},openModal:function(t,a){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e?(d()("#delModal").modal("show"),this.$store.state.couponModules.tempCoupon=Object(n["a"])({},a)):(this.isCreate=t,t?this.$store.state.couponModules.tempCoupon={}:(this.$store.state.couponModules.tempCoupon=Object(n["a"])({},a),this.$store.commit("couponModules/DUE_DATE_FORMAT",a.due_date)),d()("#updataModal").modal("show"))},detailModal:function(t){this.$store.state.couponModules.tempCoupon=Object(n["a"])({},t),d()("#detailModal").modal("show")},updataCoupon:function(){var t=this;t.$refs.form.validate().then((function(a){a?t.$store.dispatch("couponModules/updataCoupon",t.isCreate):t.$store.dispatch("alertMessageModules/updateMessage",{message:"欄位填寫不完整",status:"danger"})}))}}),created:function(){this.getCoupons()}},C=m,f=e("2877"),b=Object(f["a"])(C,s,o,!1,null,null,null);a["default"]=b.exports}}]);
//# sourceMappingURL=chunk-7e6ed214.f0c0acdf.js.map